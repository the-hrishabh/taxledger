let popupWindowId=null;chrome.action.onClicked.addListener((async e=>{if(null!==popupWindowId)try{return void await chrome.windows.update(popupWindowId,{focused:!0})}catch(e){popupWindowId=null}const o=chrome.runtime.getURL("popup.html")+"?tabUrl="+encodeURIComponent(e.url);chrome.windows.create({url:o,type:"popup",width:800,height:950},(e=>{popupWindowId=e.id}))})),chrome.windows.onRemoved.addListener((e=>{e===popupWindowId&&(popupWindowId=null)})),chrome.runtime.onMessage.addListener(((e,o,n)=>{if("fetchZip"===e.action)return fetch(e.url).then((e=>e.arrayBuffer())).then((e=>{const o=new Uint8Array(e);n({success:!0,data:Array.from(o)})})).catch((e=>{n({success:!1,error:e.toString()})})),!0})),chrome.tabs.onUpdated.addListener(((e,o,n)=>{"complete"===o.status&&n.url.includes("services.gst.gov.in/services/auth")&&chrome.runtime.sendMessage({action:"reloadPopup"})}));